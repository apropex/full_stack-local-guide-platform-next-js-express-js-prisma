model User {
  id          String  @id @default(uuid())
  name        String
  email       String  @unique
  password    String
  phone       String?
  gender      Gender
  address     String?
  bio         String?
  language    String? // Primary language
  country     String? // Country of user
  nationality String?

  status     UserStatus @default(ACTIVE)
  isVerified Boolean    @default(false)
  isDeleted  Boolean    @default(false)
  isPremium  Boolean    @default(false)

  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())

  avatar UserAvatar? @relation("UserImage")

  // Role-based extension
  role Role @default(TOURIST)

  guide Guide?
  admin Admin?

  bookings Booking[]
  reviews  Review[]

  @@index([email])
}

model Guide {
  id     String @id @default(uuid())
  userId String @unique

  expertise       String[] // categories like: ["History", "Food"]
  languages       String[] // spoken languages
  about           String?
  experienceYears Int?     @default(0)

  city    String
  country String

  dailyRate  Float
  hourlyRate Float

  isVerifiedGuide  Boolean  @default(false)
  verificationDocs String[]

  dob DateTime
  nid String

  averageRating Float? @default(0)
  totalReviews  Int?   @default(0)

  createdAt DateTime @default(now())

  user  User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  tours Tour[]
}

model Admin {
  id     String @id @default(uuid())
  userId String @unique

  dob DateTime
  nid String

  permissions String[] // Optional: MANAGE_USERS, DELETE_TOURS etc.

  createdAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model UserAvatar {
  id       String  @id @default(uuid())
  url      String
  publicId String  @unique
  format   String?
  width    Int?
  height   Int?
  bytes    Int?
  folder   String?

  createdAt DateTime @default(now())

  userId String @unique
  user   User   @relation("UserImage", fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}
