model Booking {
  id     String        @id @default(uuid())
  userId String
  tourId String
  status BookingStatus @default(PENDING)

  // One-to-one Payment
  paymentId String?  @unique
  payment   Payment? @relation(fields: [paymentId], references: [id], onDelete: Cascade)

  startDate DateTime @default(now())
  endDate   DateTime @default(now())

  trxId String?

  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  tour Tour @relation("TourBookings", fields: [tourId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([tourId])
}

model Payment {
  id          String        @id @default(uuid())
  amount      Float
  trxId       String        @unique
  paymentInfo Json?
  invoiceUrl  String?
  status      PaymentStatus @default(PENDING)
  booking     Booking?

  createdAt DateTime @default(now())

  @@index([trxId])
}
